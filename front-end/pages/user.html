<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>所持金管理アプリ</title>
  <link rel="stylesheet" href="../css/phone-main.css">
</head>

<body>
  <div class="app-container">
    <div class="header">
      <h1 id="headerTitle">所持金管理</h1>
    </div>

    <div class="content">
      <!-- Balance Tab -->
      <div class="tab-content active" id="balance">
        <div class="balance-card">
          <div class="balance-amount">¥0</div>
          <div class="balance-label">現在の所持金</div>
        </div>

        <div class="input-section">
          <h3 style="margin-bottom: 16px;">ユーザー検索</h3>
          <div class="qr-scanner" id="qrScanner">
            <div id="qrIdle">
              <i class="material-icons">qr_code_scanner</i>
              <div>タップしてQRスキャン開始</div>
            </div>

            <!-- 実際のプレビュー -->
            <video id="qrVideo" playsinline style="width:100%;max-height:260px;display:none;border-radius:8px;"></video>
            <!-- 描画＆ガイド用（非表示でOK / またはオーバーレイ描画に使う） -->
            <canvas id="qrCanvas" style="display:none;"></canvas>

            <div id="qrOverlay" style="display:none; text-align:center; margin-top:8px;">
              <button class="btn" id="qrStopBtn" type="button">停止</button>
              <button class="btn btn-outline" id="qrSwitchBtn" type="button">カメラ切替</button>
            </div>
          </div>
          <div style="text-align: center; margin: 16px 0; color: #666;">または</div>
          <div class="input-group">
            <label>ユーザーID</label>
            <input type="text" class="input-field" placeholder="ユーザーIDを入力">
          </div>
          <button class="btn">検索</button>
        </div>
      </div>

      <!-- Ranking Tab -->
      <div class="tab-content" id="ranking">
        <h3 style="margin-bottom: 20px;">ランキング</h3>
        <div style="text-align: center; padding: 40px 20px; color: #666;">
          <i class="material-icons" style="font-size: 48px; margin-bottom: 16px;">leaderboard</i>
          <div>ランキングを読み込み中...</div>
        </div>
      </div>

      <!-- History Tab -->
      <div class="tab-content" id="history">
        <h3 style="margin-bottom: 20px;">取引履歴</h3>
        <div style="text-align: center; padding: 40px 20px; color: #666;">
          <i class="material-icons" style="font-size: 48px; margin-bottom: 16px;">history</i>
          <div>履歴を読み込み中...</div>
        </div>
      </div>

      <!-- Settings Tab -->
      <div class="tab-content" id="settings">
        <h3 style="margin-bottom: 20px;">設定</h3>
        <div class="settings-item">
          <div class="settings-label">ダークモード</div>
          <label class="switch">
            <input type="checkbox" id="darkModeToggle">
            <span class="slider"></span>
          </label>
        </div>
      </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
      <div class="nav-item active" onclick="switchTab('balance', this)">
        <i class="material-icons">account_balance_wallet</i>
        <span>残高</span>
      </div>
      <div class="nav-item" onclick="switchTab('ranking', this)">
        <i class="material-icons">people</i>
        <span>ユーザー</span>
      </div>
      <div class="nav-item" onclick="switchTab('settings', this)">
        <i class="material-icons">settings</i>
        <span>設定</span>
      </div>
    </div>
  </div>
  <!-- jsQRライブラリ -->
  <script src="../js/jsQR.js"></script>
  <script src="../js/utils.js"></script>
  <script src="../js/apiService.js"></script>
  <script src="../js/uiManager.js"></script>
  <script src="../js/eventHandlers.js"></script>
  <script src="../js/qrScanner.js"></script>
  <script src="../js/phoneApp.js"></script>
</body>

</html>